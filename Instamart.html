<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Express Instamart</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ================= 1. VARIABLES & RESET ================= */
        :root {
            --primary: #111827;
            --secondary: #6B7280;
            --accent: #FF6B00;
            --green: #10B981;
            --red: #EF4444;
            --bg-body: #F3F4F6;
            --bg-card: #FFFFFF;
            --radius: 16px;
            --font-main: 'Segoe UI', system-ui, sans-serif;
            --border: #E5E5E5;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: var(--font-main); }
        body { background-color: var(--bg-body); color: var(--primary); padding-bottom: 40px; }

        /* Animations */
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }

        /* ================= 2. NAVBAR ================= */
        nav {
            position: sticky; top: 0; width: 100%; background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px); padding: 15px 5%; display: flex;
            justify-content: space-between; align-items: center; z-index: 1000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); border-bottom: 1px solid #eee;
        }

        .logo { display: flex; flex-direction: column; cursor: pointer; }
        .logo-top { font-size: 14px; font-weight: 500; color: #2c3e50; letter-spacing: 1px; }
        .logo-main { font-size: 36px; font-weight: 900; color: rgb(31, 70, 31); line-height: 1; }

        .nav-search { flex: 1; max-width: 600px; margin: 0 40px; position: relative; }
        .nav-search input { width: 100%; padding: 12px 20px 12px 50px; border-radius: 50px; border: 1px solid #E5E7EB; outline: none; background: #F9FAFB; }
        .nav-search i { position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: #9CA3AF; }

        .cart-btn-wrap {
            position: relative; cursor: pointer; background: var(--primary); color: white;
            padding: 10px 20px; border-radius: 50px; display: flex; align-items: center; gap: 10px;
        }

        .header-actions {
    display: flex;
    align-items: center;
    gap: 15px; /* Spacing between Home and Cart */
}

/* Shared Style for Buttons (Home & Cart) */
.header-icon-btn {
    position: relative;
    cursor: pointer;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: 0.3s;
    color: var(--text); /* Ensure icon is black/text color */
    text-decoration: none; /* Removes underline from <a> tag */
}

.header-icon-btn:hover {
    background: #eff6ff;
    color: var(--primary);
}

.header-icon-btn i {
    font-size: 1.5rem;
}

        /* ================= 3. HERO & CATEGORIES ================= */
      .hero-section {
    width: 100%;
    overflow: hidden;
    border-radius: 0 0 40px 40px;
    position: relative;
}

.hero-img {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
    border-radius: 15px;
}


        .category-wrapper { position: sticky; top: 80px; z-index: 900; padding: 0 5%; margin-top: 10px; }
        .category-nav { display: flex; gap: 12px; overflow-x: auto; padding: 15px; background: white; border-radius: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); scrollbar-width: none; }
        .category-nav::-webkit-scrollbar { display: none; }
        
        .nav-pill {
            white-space: nowrap; padding: 10px 24px; border-radius: 50px; background: #F3F4F6;
            color: var(--secondary); font-weight: 600; font-size: 14px; cursor: pointer; transition: 0.3s;
        }
        .nav-pill.active { background: var(--primary); color: white; }

        /* ================= 4. PRODUCTS ================= */
        #dynamic-sections-container { max-width: 1600px; margin: 50px auto; padding: 0 20px; }
        .section { margin-bottom: 50px; scroll-margin-top: 160px; animation: fadeUp 0.6s ease-out; }
        .section-header { display: flex; justify-content: space-between; align-items: end; margin-bottom: 25px; border-bottom: 2px solid #E5E7EB; padding-bottom: 10px; }
        
        .products-grid { display: flex; gap: 20px; overflow-x: auto; padding: 10px 5px 25px 5px; }
        .deals-grid, .category-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 25px; }
        
        .product-card {
            background: var(--bg-card); border-radius: var(--radius); padding: 15px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05); min-width: 250px; display: flex; flex-direction: column;
            transition: 0.3s;
        }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px rgba(0,0,0,0.1); }
        
        .product-image { height: 160px; display: flex; align-items: center; justify-content: center; position: relative; margin-bottom: 15px; }
        .product-image img { max-width: 90%; max-height: 90%; object-fit: contain; }
        
        /* Buttons */
        .add-action-area { position: absolute; bottom: -15px; right: 0; background: white; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.15); overflow: hidden; }
        .btn-add { border: 1px solid #E5E7EB; background: white; color: var(--green); font-weight: 800; padding: 8px 25px; cursor: pointer; width: 100%; }
        .btn-counter { display: none; align-items: center; background: var(--green); color: white; }
        .btn-counter button { background: none; border: none; color: white; width: 30px; height: 32px; cursor: pointer; font-weight: bold; }
        .btn-counter span { width: 30px; text-align: center; font-weight: 600; }
        .has-item .btn-add { display: none; }
        .has-item .btn-counter { display: flex; }

        .product-name { font-weight: 600; margin-bottom: 5px; height: 42px; overflow: hidden; }
        .price { font-size: 18px; font-weight: 800; }
        .old-price { font-size: 13px; color: #9CA3AF; text-decoration: line-through; margin-left: 8px; }

        /* ================= 5. OVERLAYS (Cart, Checkout, Payment) ================= */
        .page-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-body); z-index: 5000; display: none;
            flex-direction: column; animation: slideInRight 0.3s ease-out; overflow-y: auto;
        }

        .page-header {
            background: white; padding: 20px 5%; display: flex; align-items: center; gap: 20px;
            position: sticky; top: 0; z-index: 10; border-bottom: 1px solid #E5E7EB;
        }
        .back-btn { font-size: 20px; cursor: pointer; background: #f3f4f6; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; border-radius: 50%; }

        .page-content {
            max-width: 1000px; margin: 30px auto; width: 100%; padding: 0 20px;
            display: grid; grid-template-columns: 2fr 1fr; gap: 30px;
        }

        /* Forms (Address Page) */
        .form-section { background: white; border-radius: 16px; padding: 24px; margin-bottom: 20px; border: 1px solid var(--border); }
        .section-title { font-size: 20px; font-weight: 700; margin-bottom: 20px; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .form-group { margin-bottom: 16px; }
        .form-group.full-width { grid-column: 1 / -1; }
        label { display: block; font-weight: 500; margin-bottom: 8px; font-size: 14px; }
        .required { color: var(--red); }
        
        input, textarea {
            width: 100%; padding: 10px 14px; border: 1px solid var(--border);
            border-radius: 12px; font-size: 14px; transition: all 0.3s;
        }
        input.error, textarea.error { border-color: var(--red); }
        .error-message { color: var(--red); font-size: 12px; margin-top: 4px; }

        /* Payment Methods Grid (New Style) */
        .payment-methods { display: grid; gap: 16px; margin-bottom: 20px; }
        .payment-method {
            border: 2px solid var(--border); display: flex; justify-content: space-between;
            border-radius: 16px; padding: 20px; cursor: pointer; transition: all 0.3s;
            align-items: center; gap: 16px; background: white;
        }
        .payment-method:hover { border-color: #D1D5DB; }
        .payment-method.selected { border-color: #2c3e50; background: #f0f9ff; }
        
        .payment-icon {
            width: 50px; height: 50px; border-radius: 12px; display: flex;
            align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0;
        }
        .payment-radio {
            width: 24px; height: 24px; border: 2px solid var(--border); border-radius: 50%; position: relative; flex-shrink: 0;
        }
        .payment-method.selected .payment-radio { border-color: #2c3e50; background: #2c3e50; }
        .payment-method.selected .payment-radio::after {
            content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 8px; height: 8px; border-radius: 50%; background: white;
        }

        /* Summaries */
        .cart-box { background: #fff; border: 1px solid var(--border); border-radius: 16px; padding: 18px 20px; margin-bottom: 20px; }
        .summary-row { display: flex; justify-content: space-between; margin: 10px 0; font-size: 14px; }
        .total-row { font-weight: 700; font-size: 18px; margin-top: 15px; border-top: 1px dashed #eee; padding-top: 15px; }

        .checkout-btn {
            background: var(--primary); color: white; width: 100%; padding: 16px;
            border: none; border-radius: 12px; font-weight: 700; font-size: 16px;
            margin-top: 20px; cursor: pointer; transition: 0.3s;
        }
        .checkout-btn:hover { background: black; }
        
        .pay-now-btn {
            width: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; padding: 14px; border-radius: 12px; font-weight: 700; font-size: 16px;
            border: none; cursor: pointer; transition: all 0.3s; margin-top: 20px;
        }

        /* Success Modal */
        .modal { display: none; position: fixed; z-index: 6000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); align-items: center; justify-content: center; }
        .modal-content { background-color: #fefefe; padding: 40px; border-radius: 24px; text-align: center; width: 90%; max-width: 400px; animation: fadeUp 0.3s; }
        .success-icon { width: 80px; height: 80px; background: var(--green); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px; margin: 0 auto 20px; }

        /* Cart Item Styling */
        .cart-page-item { display: flex; align-items: center; gap: 15px; padding: 15px 0; border-bottom: 1px solid #f3f4f6; }
        .cart-item-img { width: 60px; height: 60px; object-fit: contain; }

        /* Toast */
        #toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(50px); background: var(--primary); color: white; padding: 12px 30px; border-radius: 50px; opacity: 0; transition: 0.4s; font-weight: 600; z-index: 6000; }
        #toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar { padding: 15px 10px; }
            .nav-search { display: none; }
            .page-content { grid-template-columns: 1fr; }
            .hero-section { padding: 10px 20px; }
            .deals-grid, .category-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="logo" onclick="location.reload()">
            <span class="logo-top">FOOD</span>
            <span class="logo-main">EXPRESS</span>
        </div>
        <div class="nav-search">
            <i class="fas fa-search"></i>
            <input type="text" id="searchInput" placeholder="Search for 'Milk', 'Chips'..." onkeyup="filterSections()">
        </div>

         <div class="header-actions">
        <a href="index.html" class="header-icon-btn" title="Back to Home">
            <i class="fas fa-home"></i>
        </a>
        
        <div class="nav-icons">
            <div class="cart-btn-wrap" onclick="openCartPage()">
                <i class="fas fa-shopping-cart"></i>
                <span id="headerCartCount">0 Items</span>
            </div>
        </div>
    </nav>

   <div class="hero-section">
    <img src="Images/instamart.png" class="hero-img" alt="">
</div>

        <div class="category-wrapper">
            <div class="category-nav" id="categoryNav"></div>
        </div>
        <div id="dynamic-sections-container"></div>
    </div>

    <div id="cart-page-view" class="page-overlay">
        <div class="page-header">
            <div class="back-btn" onclick="closeOverlay('cart-page-view')"><i class="fas fa-arrow-left"></i></div>
            <h2>Your Shopping Cart</h2>
        </div>
        <div class="page-content">
            <div class="cart-items-container" id="fullCartList"></div>
            <div class="cart-summary">
                <div class="cart-box">
                    <h3>Bill Details</h3>
                    <div class="summary-row"><span>Item Total</span><span>â‚¹<span id="billItemTotal">0</span></span></div>
                    <div class="summary-row"><span>Delivery Fee</span><span style="color:var(--green);">FREE</span></div>
                    <div class="total-row" style="display:flex; justify-content:space-between;">
                        <span>To Pay</span><span>â‚¹<span id="billFinalTotal">0</span></span>
                    </div>
                    <button class="checkout-btn" onclick="openCheckoutPage()">Proceed to Checkout</button>
                </div>
            </div>
        </div>
    </div>

    <div id="checkout-page-view" class="page-overlay">
        <div class="page-header">
            <div class="back-btn" onclick="closeOverlay('checkout-page-view')"><i class="fas fa-arrow-left"></i></div>
            <h2>Checkout</h2>
        </div>
        <div class="page-content">
            <div>
                <div class="form-section">
                    <h3 class="section-title">CONTACT INFORMATION</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Full Name <span class="required">*</span></label>
                            <input type="text" id="fullName" placeholder="Enter your full name">
                            <div class="error-message" id="fullNameError"></div>
                        </div>
                        <div class="form-group">
                            <label>Email <span class="required">*</span></label>
                            <input type="email" id="email" placeholder="Enter your email">
                            <div class="error-message" id="emailError"></div>
                        </div>
                        <div class="form-group full-width">
                            <label>Phone Number <span class="required">*</span></label>
                            <input type="tel" id="phoneNumber" placeholder="Enter your phone number">
                            <div class="error-message" id="phoneNumberError"></div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="section-title">DELIVERY ADDRESS</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Door/Flat Number <span class="required">*</span></label>
                            <input type="text" id="doorFlat" placeholder="e.g., Flat 102, ABC Apartment">
                            <div class="error-message" id="doorFlatError"></div>
                        </div>
                        <div class="form-group">
                            <label>Mobile Number <span class="required">*</span></label>
                            <input type="tel" id="mobileNumber" placeholder="Enter your mobile number">
                            <div class="error-message" id="mobileNumberError"></div>
                        </div>
                        <div class="form-group full-width">
                            <label>Full Address <span class="required">*</span></label>
                            <textarea id="fullAddress" placeholder="Enter your full address"></textarea>
                            <div class="error-message" id="fullAddressError"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <div class="cart-box">
                    <h3>Order Summary</h3>
                    <div class="summary-row"><span>Total Payable</span><span id="checkoutTotal">â‚¹0.00</span></div>
                    <div style="font-size:12px; color:#666; margin-top:10px;">Please enter a valid delivery address to proceed.</div>
                    <button class="payment-btn checkout-btn" onclick="openPaymentPage()">Proceed to Payment</button>
                </div>
            </div>
        </div>
    </div>

    <div id="payment-page-view" class="page-overlay">
        <div class="page-header">
            <div class="back-btn" onclick="closeOverlay('payment-page-view')"><i class="fas fa-arrow-left"></i></div>
            <h2>Payment Method</h2>
        </div>
        <div class="page-content">
            <div>
                <div class="form-section">
                    <h3 class="section-title">Choose Payment Method</h3>
                    <div class="payment-methods">
                        <div class="payment-method selected" onclick="selectPaymentMethod(this)">
                            <div class="payment-icon gpay">ðŸ’³</div>
                            <div class="payment-info">
                                <div class="payment-name">Google Pay</div>
                                <div class="payment-desc" style="font-size:13px; color:#666;">Pay securely with GPay</div>
                            </div>
                            <div class="payment-radio"></div>
                        </div>

                        <div class="payment-method" onclick="selectPaymentMethod(this)">
                            <div class="payment-icon phonepe">ðŸ“±</div>
                            <div class="payment-info">
                                <div class="payment-name">PhonePe</div>
                                <div class="payment-desc" style="font-size:13px; color:#666;">Pay using PhonePe UPI</div>
                            </div>
                            <div class="payment-radio"></div>
                        </div>

                        <div class="payment-method" onclick="selectPaymentMethod(this)">
                            <div class="payment-icon paytm">ðŸ’°</div>
                            <div class="payment-info">
                                <div class="payment-name">Paytm</div>
                                <div class="payment-desc" style="font-size:13px; color:#666;">Pay via Paytm wallet</div>
                            </div>
                            <div class="payment-radio"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <div class="cart-box">
                    <h3>Payment Summary</h3>
                    <div class="summary-row total-row" style="margin-top:0;">
                        <span>Amount to Pay</span>
                        <span id="paymentAmount">â‚¹0.00</span>
                    </div>
                    <button class="pay-now-btn" id="confirmPaymentBtn" onclick="processPayment()">Pay Now</button>
                    <div style="background: #f0f9ff; padding: 16px; border-radius: 12px; margin-top: 20px;">
                        <div style="font-size: 13px; color: #0369a1;"><strong>âœ“</strong> 100% Safe & Encrypted</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="successModal" class="modal">
        <div class="modal-content">
            <div class="success-icon"><i class="fas fa-check"></i></div>
            <h2>Order Placed!</h2>
            <p style="color:#666; margin:15px 0;">Your groceries will arrive in 15 mins.</p>
            <button class="checkout-btn" onclick="closeSuccessModal()">Continue Shopping</button>
        </div>
    </div>

    <div id="toast">Item added</div>

<script>
// ================= DATA =================
const allSectionsData = [
    {
        title: "Top Deals in Beauty & Care", id: "beauty",
        products: [
            { name: "Tresemme Keratin Smooth Shampoo", size: "580 ml", price: 443, oldPrice: 1108, img: "Images/Tresemme Keratin Smooth Shampoo.webp" },
            { name: "Himalaya Purifying Neem Face Wash", size: "400 ml", price: 276, oldPrice: 599, img: "Images/facewashneem.png" },
            { name: "Rexona Women Roll on aloe vera", size: "50 ml", price: 89, oldPrice: 190, img: "Images/rexona.jpeg" },
            { name: "Head & Shoulders Smooth And Silky", size: "650 ml", price: 437, oldPrice: 1125, img: "Images/headandshoulder.jpg" },
            { name: "Arcta Anti-Hairfall Onion Shampoo", size: "200 ml", price: 99, oldPrice: 299, img: "Images/antihairfall.webp" },
            { name: "Dove Cream Beauty Bathing", size: "625 g", price: 357, oldPrice: 522, img: "Images/dove.webp" },
            { name: "Biotique Herbcolor 3N Darkest Brown", size: "110 ml", price: 180, oldPrice: 375, img: "Images/herbcolor.jpg" },
            { name: "Fiama Soap", size: "125 g", price: 70, oldPrice: 79, img: "Images/Fiamasoap.webp" }
        ]
    },
    {
        title: "Top Deals on Kitchen Staples", id: "kitchen",
        products: [
            { name: "Aashirvaad Multigrains Atta", size: "5 kg", price: 300, oldPrice: 406, img: "Images/Aashirwaad.jpg" },
            { name: "Aashirvaad Pure Cow Ghee", size: "500 ml", price: 359, oldPrice: 489, img: "Images/ghee.jpg" },
            { name: "Tata Sampann Unpolished Chana", size: "1 kg", price: 99, oldPrice: 160, img: "Images/chanaadal.webp" },
            { name: "Fortune Rice Bran Oil", size: "1 ltr", price: 174, oldPrice: 220, img: "Images/ricebanoil.png" },
            { name: "Vedaka Premium Raisins", size: "25 kg", price: 1696, oldPrice: 1950, img: "Images/vedaka.jpg" },
            { name: "Tata Salt Lite", size: "5 kg", price: 300, oldPrice: 406, img: "Images/salt.jpg" },
            { name: "Everest Red Chilli Powder", size: "900 g", price: 806, oldPrice: 1450, img: "Images/Everest.jpg" },
            { name: "MDH Garam Masala", size: "870 g", price: 150, oldPrice: 198, img: "Images/garamMasala.webp" }
        ]
    },
    {
        title: "â­ TOP DEALS ON BESTSELLERS â­", id: "bestsellers",
        products: [
            { name: "Sunfeast Dark Fantasy Bourbon Biscuits", size: "108 g", price: 15, oldPrice: 35, img: "/Images/DarkFantasy.webp" },
            { name: "Hammer Airflow Plus In-Ear Truly Wireless", size: "1 unit", price: 399, oldPrice: 4999, img: "/Images/earbuds.jpg" },
            { name: "Bingo Tedhe Medhe Masala Munch", size: "75 g x 2", price: 16, oldPrice: 40, img: "/Images/kurKur.webp" },
            { name: "Hide & Seek Parle Chocolate Chip Cookies", size: "100 g", price: 26, oldPrice: 30, img: "/Images/hideseek.webp" },
            { name: "Sunfeast Dark Fantasy Yumfills Chocolate", size: "242 g", price: 80, oldPrice: 180, img: "/Images/Darkfantasy.jpg" },
            { name: "Hocco Hazelnut Mudslide Cone Ice Cream", size: "135 ml", price: 75, oldPrice: 100, img: "/Images/Hazelnuticecream.webp" },
            { name: "DesiDiya Pixel LED String Light", size: "1 Piece", price: 69, oldPrice: 999, img: "/Images/LED.webp" },
            { name: "Pepsi Soft Bottle", size: "750 ml", price: 36, oldPrice: 40, img: "/Images/Pepsi.jpg" }
        ]
    },
    {
        title: "Top Deals in Fruits", id: "fruits",
        products: [
            { name: "Tender Coconut", size: "1 pc", price: 60, oldPrice: 75, img: "/Images/tenderCoconut.webp" },
            { name: "Guava", size: "500 g", price: 40, oldPrice: 47, img: "/Images/guava.jpg" },
            { name: "Apple", size: "1 kg", price: 150, oldPrice: 165, img: "/Images/app.jpg" },
            { name: "Red Banana", size: "1 kg", price: 80, oldPrice: 98, img: "/Images/RedBanan.webp" },
            { name: "Mango", size: "1 kg", price: 120, oldPrice: 155, img: "/Images/Mango.webp" },
            { name: "Papaya", size: "1 pc", price: 45, oldPrice: 56, img: "/Images/Papaya.jpg" },
            { name: "Pineapple", size: "1 pc", price: 80, oldPrice: 105, img: "/Images/Pineapple.jpg" },
            { name: "Watermelon", size: "1 pc", price: 60, oldPrice: 73, img: "/Images/watermelon 1.webp" },
            { name: "Orange", size: "1 kg", price: 90, oldPrice: 105, img: "/Images/Orange1.jpg" },
            { name: "Strawberry", size: "250 g", price: 120, oldPrice: 150, img: "/Images/strawberry.jpg" }
        ]
    },
    {
        title: "Top Deals in Vegetables", id: "vegetables",
        products: [
            { name: "Tomato", size: "1 kg", price: 40, oldPrice: 50, img: "/Images/Tomato.jpg" },
            { name: "Potato", size: "1 kg", price: 35, oldPrice: 42, img: "/Images/Potato.webp" },
            { name: "Onion", size: "1 kg", price: 45, oldPrice: 50, img: "/Images/Onion.jpg" },
            { name: "Carrot", size: "500 g", price: 25, oldPrice: 30, img: "/Images/Carrot.jpg" },
            { name: "Cauliflower", size: "1 pc", price: 45, oldPrice: 55, img: "/Images/cauliflower.jpg" },
            { name: "Capsicum", size: "500 g", price: 55, oldPrice: 70, img: "/Images/Capsicum.jpg" },
            { name: "Cabbage", size: "1 pc", price: 35, oldPrice: 47, img: "/Images/cabbage.jpg" },
            { name: "Green Beans", size: "500 g", price: 45, oldPrice: 53, img: "/Images/beans.jpg" },
            { name: "Brinjal", size: "500 g", price: 30, oldPrice: 34, img: "/Images/Brinjal.webp" },
            { name: "Spinach", size: "1 bunch", price: 25, oldPrice: 32, img: "/Images/beetroot.webp" }
        ]
    },
    {
        title: "Top Deals in Kitchen Essentials", id: "kitchen-tools",
        products: [
            { name: "Chef Knife", size: "1 pc", price: 800, oldPrice: 1000, img: "/Images/chefSnife.webp" },
            { name: "Cutting Board", size: "1 pc", price: 350, oldPrice: 410, img: "/Images/CuttingBoard.webp" },
            { name: "Non-stick Pan", size: "24 cm", price: 1200, oldPrice: 1350, img: "/Images/pans.webp" },
            { name: "Measuring Cups", size: "Set of 4", price: 250, oldPrice: 305, img: "/Images/Measuring cups.jpg" },
            { name: "Mixing Bowls", size: "Set of 3", price: 600, oldPrice: 770, img: "/Images/Cups.webp" },
            { name: "Blender", size: "1 pc", price: 2500, oldPrice: 3100, img: "/Images/Blender.jpg" },
            { name: "Whisk", size: "1 pc", price: 150, oldPrice: 170, img: "/Images/whisk.webp" },
            { name: "Peeler", size: "1 pc", price: 100, oldPrice: 120, img: "/Images/Peeler.webp" },
            { name: "Tongs", size: "1 pc", price: 180, oldPrice: 220, img: "/Images/Blender.jpg" }
        ]
    },
    {
        title: "Pharmacy Essentials", id: "pharmacy", isPharmacy: true, 
        products: [
            { name: "Paracetamol", size: "10 Tablets", price: 25, oldPrice: 40, img: "https://pngimg.com/uploads/medicine/medicine_PNG15485.png" },
            { name: "Vitamin C", size: "60 Capsules", price: 199, oldPrice: 250, img: "https://pngimg.com/uploads/vitamin/vitamin_PNG184.png" },
            { name: "Surgical Mask", size: "Pack of 50", price: 149, oldPrice: 199, img: "https://pngimg.com/uploads/mask/mask_PNG94.png" },
            { name: "Cough Syrup", size: "100 ml", price: 89, oldPrice: 120, img: "https://pngimg.com/uploads/syrup/syrup_PNG11.png" },
            { name: "Hand Sanitizer", size: "200 ml", price: 99, oldPrice: 150, img: "https://pngimg.com/uploads/hand_sanitizer/hand_sanitizer_PNG51.png" },
            { name: "Digital Thermometer", size: "1 Unit", price: 249, oldPrice: 399, img: "https://pngimg.com/uploads/thermometer/thermometer_PNG72.png" },
            { name: "Medical Gloves", size: "Pack of 100", price: 349, oldPrice: 499, img: "https://pngimg.com/uploads/gloves/gloves_PNG8032.png" },
            { name: "Antiseptic Cream", size: "50 g", price: 79, oldPrice: 120, img: "https://pngimg.com/uploads/ointment/ointment_PNG64.png" },
            { name: "Asthma Inhaler", size: "200 Doses", price: 299, oldPrice: 399, img: "https://pngimg.com/uploads/inhaler/inhaler_PNG44.png" },
            { name: "First Aid Kit", size: "1 Box", price: 499, oldPrice: 650, img: "https://pngimg.com/uploads/first_aid_kit/first_aid_kit_PNG24.png" }
        ]
    },
    {
        title: "Top Deals in Ice Creams", id: "icecream",
        products: [
            { name: "Magnum Classic", size: "120 ml", price: 120, oldPrice: 200, img: "/Images/MagnumStore.webp" },
            { name: "Cornetto Choco", size: "90 ml", price: 80, oldPrice: 125, img: "/Images/Coretto.jpg" },
            { name: "Kwality Walls Vanilla", size: "100 ml", price: 60, oldPrice: 85, img: "/Images/vennila.jpg" },
            { name: "Amul Strawberry", size: "150 ml", price: 55, oldPrice: 75, img: "/Images/amul-strawberry.jpg" },
            { name: "HÃ¤agen-Dazs Chocolate", size: "100 ml", price: 250, oldPrice: 450, img: "https://images.pexels.com/photos/3026806/pexels-photo-3026806.jpeg" },
            { name: "Kwality Walls Black Currant", size: "100 ml", price: 75, oldPrice: 115, img: "/Images/Blackcurrent.webp" },
            { name: "Amul Butter Scotch", size: "150 ml", price: 60, oldPrice: 85, img: "/Images/ButterScotch.avif" },
            { name: "Breyers Choco Fudge", size: "120 ml", price: 130, oldPrice: 215, img: "/Images/Breyers.png" },
            { name: "Kwality Walls Mango", size: "100 ml", price: 55, oldPrice: 75, img: "/Images/mango.png" },
            { name: "Haagen-Dazs Vanilla", size: "100 ml", price: 250, oldPrice: 450, img: "/Images/vennila.jpg" }
        ]
    },
   {
        title: "Grocery & Kitchen", 
        id: "grocery-cat",
        layout: "grid", // This makes it look like a shop grid
        products: [
            { name: "Fresh Vegetables Mix", size: "1 kg", price: 99, oldPrice: 150, img: "/Images/Vegetables.webp" },
            { name: "Fresh Fruits Basket", size: "1 kg", price: 149, oldPrice: 200, img: "/Images/Fruits.jpg" },
            { name: "Dairy & Eggs Combo", size: "1 Pack", price: 89, oldPrice: 120, img: "/Images/proteins.webp" },
            { name: "Breakfast Cereals", size: "500 g", price: 299, oldPrice: 350, img: "/Images/cerals.jpg" },
            { name: "Aashirvaad Atta", size: "5 kg", price: 350, oldPrice: 410, img: "/Images/ricewheat.webp" },
            { name: "Cooking Oil 1L", size: "1 L", price: 150, oldPrice: 180, img: "/Images/gheeandoil.jpg" },
            { name: "Kitchen Masalas", size: "Pack of 5", price: 200, oldPrice: 250, img: "/Images/Masalas.jpg" },
            { name: "Premium Dry Fruits", size: "250 g", price: 499, oldPrice: 600, img: "/Images/Drynuts.jpg" }
        ]
    },
    {
        title: "Snacks & Drinks", 
        id: "snacks-cat",
        layout: "grid",
        products: [
            { name: "Cold Drinks Pack", size: "2 L", price: 95, oldPrice: 110, img: "/Images/Drinks.webp" },
            { name: "Family Ice Cream", size: "700 ml", price: 199, oldPrice: 250, img: "/Images/Icecream.avif" },
            { name: "Chips Party Pack", size: "3 Packs", price: 60, oldPrice: 90, img: "/Images/Chips.webp" },
            { name: "Premium Chocolates", size: "1 Bar", price: 80, oldPrice: 100, img: "/Images/Chocolates.png" },
            { name: "Instant Noodles", size: "Pack of 4", price: 56, oldPrice: 60, img: "/Images/Funkfoods.webp" },
            { name: "Frozen French Fries", size: "400 g", price: 120, oldPrice: 150, img: "/Images/FrozeenFood.png" },
            { name: "Cream Biscuits", size: "Pack of 2", price: 60, oldPrice: 80, img: "/Images/Biscuits.avif" },
            { name: "Chocolate Shake", size: "180 ml", price: 40, oldPrice: 50, img: "/Images/Shakes.webp" },
            { name: "Butter Cookies", size: "1 Box", price: 150, oldPrice: 200, img: "/Images/cookies.jpg" }
        ]
    },
    {
        title: "Beauty & Wellness", 
        id: "beauty-cat",
        layout: "grid",
        products: [
            { name: "Bath Soap Bundle", size: "3 x 125g", price: 120, oldPrice: 150, img: "/Images/bathingsoap.jpg" },
            { name: "Herbal Hair Oil", size: "200 ml", price: 199, oldPrice: 250, img: "/Images/Haircare.avif" },
            { name: "Face Moisturizer", size: "50 g", price: 299, oldPrice: 400, img: "/Images/skincare.jpg" },
            { name: "Daily Makeup Kit", size: "1 Set", price: 999, oldPrice: 1500, img: "/Images/Makeup.jpg" },
            { name: "Neem Face Wash", size: "100 ml", price: 150, oldPrice: 190, img: "/Images/face-wash.webp" },
            { name: "Body Perfume", size: "150 ml", price: 199, oldPrice: 250, img: "/Images/perfumes.jpg" },
            { name: "Shaving Foam", size: "200 ml", price: 160, oldPrice: 199, img: "/Images/Shaving.jpg" },
            { name: "Beard Growth Oil", size: "30 ml", price: 250, oldPrice: 350, img: "/Images/Beardkit.jpg" }
        ]
    }
];

let cart = {}; 

function init() { renderNavigation(); renderSections(); }

// 1. Navigation
function renderNavigation() {
    const navContainer = document.getElementById('categoryNav');
    navContainer.innerHTML = allSectionsData.map(sec => 
        `<div class="nav-pill" onclick="scrollToSection('${sec.id}')">${sec.title}</div>`
    ).join('');
}

function scrollToSection(id) {
    const el = document.getElementById(id);
    if(el) {
        window.scrollTo({ top: el.offsetTop - 140, behavior: "smooth" });
        document.querySelectorAll('.nav-pill').forEach(p => p.classList.remove('active'));
        event.target.classList.add('active');
    }
}

// 2. Render Products
function renderSections() {
    const container = document.getElementById('dynamic-sections-container');
    container.innerHTML = allSectionsData.map(sec => `
        <section class="section" id="${sec.id}">
            <div class="section-header"><h2 class="section-title">${sec.title}</h2></div>
            <div class="products-grid">
                ${sec.products.map(prod => {
                    const safeName = prod.name.replace(/'/g, "\\'");
                    const inCart = cart[prod.name] ? cart[prod.name].qty : 0;
                    return `
                    <div class="product-card ${inCart > 0 ? 'has-item' : ''}" id="card-${safeName.replace(/\s/g, '')}">
                        <div class="product-image">
                            <img src="${prod.img}" alt="${prod.name}" loading="lazy">
                            <div class="add-action-area">
                                <button class="btn-add" onclick="modifyCart('${safeName}', ${prod.price}, 1, '${prod.img}')">ADD</button>
                                <div class="btn-counter">
                                    <button onclick="modifyCart('${safeName}', ${prod.price}, -1, '${prod.img}')">-</button>
                                    <span id="qty-${safeName.replace(/\s/g, '')}">${inCart}</span>
                                    <button onclick="modifyCart('${safeName}', ${prod.price}, 1, '${prod.img}')">+</button>
                                </div>
                            </div>
                        </div>
                        <div class="product-name">${prod.name}</div>
                        <div><span class="price">â‚¹${prod.price}</span><span class="old-price">â‚¹${prod.oldPrice}</span></div>
                    </div>`;
                }).join('')}
            </div>
        </section>
    `).join('');
}

// 3. Cart Logic
function modifyCart(name, price, change, img) {
    if (!cart[name]) cart[name] = { qty: 0, price: price, img: img };
    cart[name].qty += change;
    if (cart[name].qty <= 0) delete cart[name];
    else if (change > 0) showToast("Item added");

    updateHeaderCart();
    updateCardButtonState(name);
    // Refresh list if cart is open
    if(document.getElementById('cart-page-view').style.display === 'flex') renderCartPageItems();
}

function updateCardButtonState(name) {
    const safeId = name.replace(/\s/g, '');
    const cards = document.querySelectorAll(`[id="card-${safeId}"]`);
    cards.forEach(card => {
        const qty = cart[name] ? cart[name].qty : 0;
        if (qty > 0) {
            card.classList.add('has-item');
            const span = card.querySelector(`span[id^="qty-"]`);
            if(span) span.innerText = qty;
        } else card.classList.remove('has-item');
    });
}

function updateHeaderCart() {
    let q = 0; for (let i in cart) q += cart[i].qty;
    document.getElementById('headerCartCount').innerText = q > 0 ? `${q} Items` : "0 Items";
}

// 4. Overlays
function openCartPage() {
    if(Object.keys(cart).length === 0) { alert("Cart is empty"); return; }
    renderCartPageItems();
    document.getElementById('cart-page-view').style.display = 'flex';
}

function renderCartPageItems() {
    const list = document.getElementById('fullCartList');
    let total = 0;
    let html = '';
    for (let [name, item] of Object.entries(cart)) {
        total += item.price * item.qty;
        const safeName = name.replace(/'/g, "\\'");
        html += `
        <div class="cart-page-item">
            <img src="${item.img}" class="cart-item-img">
            <div style="flex:1;"><b>${name}</b><br><small>â‚¹${item.price}</small></div>
            <div style="display:flex; align-items:center; gap:10px; border:1px solid #ddd; padding:5px 10px; border-radius:6px;">
                <i class="fas fa-minus" style="cursor:pointer" onclick="modifyCart('${safeName}', ${item.price}, -1, '${item.img}')"></i>
                <b>${item.qty}</b>
                <i class="fas fa-plus" style="cursor:pointer; color:var(--green)" onclick="modifyCart('${safeName}', ${item.price}, 1, '${item.img}')"></i>
            </div>
            <div style="width:60px; text-align:right;"><b>â‚¹${item.price * item.qty}</b></div>
        </div>`;
    }
    list.innerHTML = html;
    document.getElementById('billItemTotal').innerText = total;
    document.getElementById('billFinalTotal').innerText = total;
    document.getElementById('checkoutTotal').innerText = total;
    document.getElementById('paymentAmount').innerText = total;
}

// FLOW: Cart -> Checkout (Address) -> Payment
function openCheckoutPage() {
    document.getElementById('cart-page-view').style.display = 'none';
    document.getElementById('checkout-page-view').style.display = 'flex';
}

function validateForm() {
    const fields = ['fullName', 'email', 'phoneNumber', 'doorFlat', 'mobileNumber'];
    let valid = true;
    fields.forEach(id => {
        const el = document.getElementById(id);
        if(!el.value.trim()) { el.classList.add('error'); valid = false; }
        else { el.classList.remove('error'); }
    });
    return valid;
}

function openPaymentPage() {
    if(validateForm()) {
        document.getElementById('checkout-page-view').style.display = 'none';
        document.getElementById('payment-page-view').style.display = 'flex';
    }
}

function closeOverlay(id) {
    document.getElementById(id).style.display = 'none';
    // Back navigation logic
    if(id === 'checkout-page-view') document.getElementById('cart-page-view').style.display = 'flex';
    if(id === 'payment-page-view') document.getElementById('checkout-page-view').style.display = 'flex';
}

function selectPaymentMethod(el) {
    document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
    el.classList.add('selected');
}

function processPayment() {
    const btn = document.getElementById('confirmPaymentBtn');
    btn.innerHTML = 'Processing...';
    setTimeout(() => {
        document.getElementById('successModal').style.display = 'flex';
        btn.innerHTML = 'Pay Now';
    }, 2000);
}

function closeSuccessModal() {
    document.getElementById('successModal').style.display = 'none';
    cart = {}; updateHeaderCart();
    document.querySelectorAll('.page-overlay').forEach(p => p.style.display = 'none');
    renderSections();
}

function showToast(msg) {
    const t = document.getElementById('toast');
    t.innerText = msg; t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 2000);
}

function filterSections() {
    const term = document.getElementById('searchInput').value.toLowerCase();
    document.querySelectorAll('.section').forEach(sec => {
        sec.style.display = sec.innerText.toLowerCase().includes(term) ? "block" : "none";
    });
}

// Clear errors on input
['fullName', 'email', 'phoneNumber', 'doorFlat', 'mobileNumber'].forEach(id => {
    document.getElementById(id).addEventListener('input', function() { this.classList.remove('error'); });
});

window.onload = init;


</script>
</body>
</html>